mainapp.filter("startFrom",function(){return function(e,t){return t=+t,e.slice(t)}}),mainapp.controller("verifyController",function(e,t){e.currentPage=1,e.pageSize=10,e.requests=[],e.allrequests=[],e.allnumber=0,e.numberOfPages=function(){return Math.ceil(e.allnumber/e.pageSize)},e.sortingfield="UserID",e.sorttype=0,e.changesort=function(t){e.sortingfield!=t?e.sorttype=1:e.sorttype=1-e.sorttype,e.sortingfield=t},e.getVerified=function(e){return null==e||"0"==e?"Unverified":"Verified"},e.decodeHtml=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},e.filterfunction=function(e){return!0},e.list_properties=function(n){t({url:"/apiadmin.aspx/get_unverifiedpropertylist",method:"POST",data:'{ "page": '+(n-1)+', "sorting_field":"'+e.sortingfield+'", "sorttype":'+e.sorttype+"}",dataType:"json",headers:{"Content-Type":"application/json"}}).then(function(t){e.allrequests=t.data.d,console.log(t.data)},function(e){})},e.getall_mapunverified_properties=function(){t({url:"/apiadmin.aspx/getnumber_unverifiedpropertylist",method:"POST",data:{},headers:{"Content-Type":"application/json"}}).then(function(t){e.allnumber=t.data.d,console.log(t.data)},function(e){})},e.update=function(){e.list_properties(0),e.getall_mapunverified_properties()},e.update(),e.downloadcsv=function(){for(var t="",n=document.getElementById("table").rows[0].cells,r=0;r<n.length;r++)t=t+n[r].innerHTML.replace(/(<([^>]+)>)/g,"").replace(/[\s+]/g,"")+",";t=t.substring(0,t.length-1),t+="\n";for(var a=[{name:"created",type:0,filter:"",prefix:0},{name:"amount",type:0,filter:"$",prefix:0},{name:"sname",type:0,filter:"",prefix:0},{name:"rname",type:0,filter:"",prefix:0},{name:"getid",type:1,filter:"",params:["rid","rtype"],count:2},{name:"getid",type:1,filter:"",params:["sid","stype"],count:2},{name:"sbalance",type:0,filter:"$",prefix:0},{name:"incoming",type:0,filter:"$",prefix:0},{name:"outgoing",type:0,filter:"$",prefix:0},{name:"getStatus",type:1,filter:"",params:["status"]}],i=0;i<e.requests.length;i++){var o=e.requests[i],l=a.length;t=t+(i+1)+",";for(r=0;r<l;r++){var p=a[r],s="",f="";if(9==r&&(t+=" ,"),0==p.type)0==p.prefix?s=p.filter:f=p.filter,t=t+s+o[p.name].toString().replace(/[,]/g,"")+f+",";else t=t+(2==p.count?e[p.name](o[p.params[0]],o[p.params[1]]):e[p.name](o[p.params[0]]))+","}t=t.substring(0,t.length-1),t+="\n"}t=t.substring(0,t.length-1);var u=$("<a/>",{style:"display:none",href:"data:application/octet-stream;base64,"+btoa(t),download:"emailStatistics.csv"}).appendTo("body");u[0].click(),u.remove()}});