var cur_page=0,max_page=1,refresh_flag=0;function refreshprop(){$(".pcontent").empty().append(' <div class="loading-bro">  <h1>Searching...</h1>  <svg id="load" x="0px" y="0px" viewBox="0 0 150 150"> <circle id="loading-inner" cx="75" cy="75" r="60"/></svg>  </div>'),refresh_flag=1,callProplistfunction(cur_page=0)}function callProplistfunction(e){var a=$("#strkeyword").val(),t=$("input[name=roomnums]:checked").val(),n=$("input[name=amenitytype]:checked").val(),i=$("input[name=pricesort]:checked").val();getpropertylist(a,$("input[name=proptype]:checked").val(),n,t,i,e)}function getpropertylist(e,a,t,n,i,o){console.log("call ajax"),$.ajax({type:"POST",url:"/ajaxhelper.aspx/getpropertylistkeyword",data:'{keyword:"'+e+'",proptype:'+a+",amenitytype:"+t+",roomnum:"+n+",sorttype:"+i+",pagenum:"+o+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:processPropertyData,error:function(e){console.log(e.d)}})}function processPropertyData(e){console.log(e.d);var a=e.d.propertyList,t=e.d.allnums;1==refresh_flag&&addPagination(t),refresh_flag=0,0!=t?displayContent(a):$(".pcontent").empty().append('<div class="newrow centered">No results</div>')}$(document).ready(function(){console.log("ready"),refreshprop()});var min_rentaltypes=["None","2 Nights","3 Nights","1 Week","2 Weeks","Monthly","1 Night"],prop_typeval=[2,5,11];function displayContent(e){$(".pcontent").empty();var a=e.length;for(i=0;i<a;i++){var t=e[i],n="Sleeps "+t.detail.NumSleeps,o="Rates: "+t.detail.MinNightRate+"-"+t.detail.HiNightRate+"  "+t.detail.MinRateCurrency,p=(t.amenity.length,"/"+t.detail.Country+"/"+t.detail.StateProvince+"/"+t.detail.City+"/"+t.detail.ID+"/default.aspx"),l="/"+t.detail.Country+"/"+t.detail.StateProvince+"/"+t.detail.City+"/default.aspx",c="/"+t.detail.Country+"/"+t.detail.StateProvince+"/default.aspx",r=-1==prop_typeval.indexOf(t.detail.Category)?t.detail.City+" "+t.detail.NumBedrooms+" bedroom Vacation Rentals":t.detail.City+" "+t.detail.NumBedrooms+" bedroom Boutique Hotels",s='<div class="newitem centered">                         <div class="newrow"> <a href="'+l.toLowerCase().replaceAll(" ","_")+'" class="wlocation">'+t.detail.City+'</a>,<a href="'+c.toLowerCase().replaceAll(" ","_")+'" class="wlocation">'+t.detail.StateProvince+'</a></div>                       <div class="newrow">                          <div class="drop-shadow effect4">  <a href="'+p.toLowerCase().replaceAll(" ","_")+'"> <img title="'+r+'" alt="'+r+'" class="imgstyle" src="images/'+t.detail.FileName+'" /> </a></div>                        </div>                        <div class="comments">                        <div class="newrow"><span class="clocation">'+t.detail.CategoryTypes+'</span>                        <span class="clocation">'+n+'</span>                          <span class="clocation">'+o+"</span> </div>                        </div>                             </div>";$(".pcontent").append(s)}}var min_groupnum=0,max_group=0,cpagenums=0;function showPagination(e){for(max_group=Math.min(max_page,e+10),min_groupnum=e,$("#paging").empty(),$("#paging").append('<span class="pg-normal" onclick="backpage()">«Prev</span>'),i=e;i<max_page;i++)$("#paging").append('|<span class="pg-normal" onclick="getpage('+i+')" id="page'+i+'">'+(i+1)+"</span>");$("#paging").append('|<span class="pg-normal"  onclick="nextpage()"> Next»</span>'),$("#page"+cur_page).addClass("pg-selected")}function addPagination(e){max_page=Math.ceil(e/20),console.log(max_page+"  "+e),min_groupnum=cur_page,showPagination(cur_page)}function callPropAjax(){$(".pcontent").empty().append(' <div class="loading-bro">  <h1>Searching...</h1>  <svg id="load" x="0px" y="0px" viewBox="0 0 150 150"> <circle id="loading-inner" cx="75" cy="75" r="60"/></svg>  </div>'),$(".pagination").find(".pg-selected").removeClass("pg-selected"),$("#page"+cur_page).addClass("pg-selected"),callProplistfunction(cur_page)}function getpage(e){cur_page!=e&&(cur_page=e,console.log(min_groupnum+" "+max_group+" "+cur_page),changedPage())}function changedPage(){callPropAjax()}function backpage(){cur_page>0&&(cur_page--,changedPage())}function nextpage(){cur_page+1<max_page&&(cur_page++,changedPage())}